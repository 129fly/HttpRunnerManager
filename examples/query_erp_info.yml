- config:
    name: 企业信息查询接口基本配置
    variables:
        - url: http://10.65.209.29:8065/pas/gateway.do
        - service: query_erp_info
        - version: PAS_1.0
        - request_time: ${get_now_time()}
        - partner_id: 200003670082
        - _input_charset: UTF-8
        - sign_type: MD5
        - sign_version: 1.0
        - encrypt_version: 1.0
        - memo: test
    request:
        data:
            service: $service
            version: $version
            request_time: $request_time
            partner_id: $partner_id
            _input_charset: $_input_charset
            sign_type: $sign_type
            sign_version: $sign_version
            encrypt_version: $encrypt_version
            memo: $memo

- test:
    name: 企业信息查询正确信息
    variables:
        - out_request_no: ${get_now_time()}
        - erp_param: 小米科技有限责任公司
        - erp_type: ENAME 
    request:
        method: POST
        url: $url
        data:
            out_request_no: $out_request_no
            erp_type: $erp_type
        encrypt_data:
            erp_param: $erp_param
    extractors:
        - text: text
    validators:
        - {"check": "text", "comparator": "contains", "expected": "VALIDATE_TRUE"}
        - {"check": "text", "comparator": "contains", "expected": "验证正确"}

- test:
    name: 企业信息查询参数类型不支持
    variables:
        - out_request_no: ${get_now_time()}
        - erp_param: 小米科技有限责任公司
        - erp_type: ENAM 
    request:
        method: POST
        url: $url
        data:
            out_request_no: $out_request_no
            erp_type: $erp_type
        encrypt_data:
            erp_param: $erp_param
    extractors:
        - response_code: response_code
        - response_message: response_message
    validators:
        - {"check": "response_code", "comparator": "eq", "expected": "ILLEGAL_ARGUMENT"}
        - {"check": "response_message", "comparator": "eq", "expected": "企业参数类型暂不支持"}



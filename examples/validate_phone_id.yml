- config:
    name: 手机实名信息校验基本参数
    variables:
        - url: http://10.65.209.29:8065/pas/gateway.do
        - service: validate_phone_id
        - version: PAS_1.0
        - request_time: ${get_now_time()}
        - partner_id: 200003670082
        - _input_charset: UTF-8
        - sign_type: RSA
        - sign_version: 1.0
        - encrypt_version: 1.0
        - memo: test
    request:
        data:
            service: $service
            version: $version
            request_time: $request_time
            partner_id: $partner_id
            _input_charset: $_input_charset
            sign_type: $sign_type
            sign_version: $sign_version
            encrypt_version: $encrypt_version
            memo: $memo


- test:
    name: 手机实名认证通过
    variables:
        - out_request_no: ${get_now_time()}
        - real_name: 尹全旺
        - cert_type: IC 
        - cert_no: 43042319941103625x
        - phone_no: 17602144093
    request:
        method: POST
        url: $url
        data:
            out_request_no: $out_request_no
            cert_type: $cert_type
        encrypt_data:
            real_name: $real_name
            cert_no: $cert_no
            phone_no: $phone_no
    extractors:
        - response_code: body.response_code
        - response_message: body.response_message
    validators:
        - {"check": "response_code", "comparator": "eq", "expected": "VALIDATE_TRUE"}
        - {"check": "response_message", "comparator": "eq", "expected": "验证正确"}

- test:
    name: 手机实名认证-户名不匹配
    variables:
        - out_request_no: ${get_now_time()}
        - real_name: 银泉
        - cert_type: IC 
        - cert_no: 43042319941103625x
        - phone_no: 17602144093
    request:
        method: POST
        url: $url
        data:
            out_request_no: $out_request_no
            cert_type: $cert_type
        encrypt_data:
            real_name: $real_name
            cert_no: $cert_no
            phone_no: $phone_no
    extractors:
        - response_code: body.response_code
        - response_message: body.response_message
    validators:
        - {"check": "response_code", "comparator": "eq", "expected": "VALIDATE_FAIL"}
        - {"check": "response_message", "comparator": "eq", "expected": "验证失败"}


- test:
    name: 手机实名认证-证件号码不匹配
    variables:
        - out_request_no: ${get_now_time()}
        - real_name: 尹全旺
        - cert_type: IC 
        - cert_no: 430423199411036251
        - phone_no: 17602144093
    request:
        method: POST
        url: $url
        data:
            out_request_no: $out_request_no
            cert_type: $cert_type
        encrypt_data:
            real_name: $real_name
            cert_no: $cert_no
            phone_no: $phone_no
    extractors:
        - response_code: response_code
        - response_message: response_message
    validators:
        - {"check": "response_code", "comparator": "eq", "expected": "ILLEGAL_ARGUMENT"}
        - {"check": "response_message", "comparator": "eq", "expected": "证件号码校验失败"}

- test:
    name: 手机实名认证-手机号不匹配
    variables:
        - out_request_no: ${get_now_time()}
        - real_name: 尹全旺
        - cert_type: IC 
        - cert_no: 43042319941103625x
        - phone_no: 17602144091
    request:
        method: POST
        url: $url
        data:
            out_request_no: $out_request_no
            cert_type: $cert_type
        encrypt_data:
            real_name: $real_name
            cert_no: $cert_no
            phone_no: $phone_no
    extractors:
        - response_code: response_code
        - response_message: response_message
    validators:
        - {"check": "response_code", "comparator": "eq", "expected": "VALIDATE_FAIL"}
        - {"check": "response_message", "comparator": "eq", "expected": "验证失败"}

